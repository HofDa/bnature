---
import Icon from '../ui/Icon.astro';
import type { Lang, PageContent } from '../../data/content';

interface Props {
  lang: Lang;
  contact: PageContent['contact'];
}

const { lang, contact } = Astro.props;
const withBase = (path: string) => {
  const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
  return `${base}${path.replace(/^\/+/, '')}`;
};
---
<section id="contact" class="section bg-sand-100">
  <div class="section-container" data-reveal>
    <div class="grid items-start gap-10 lg:grid-cols-2">
      <div>
        <h2 class="h2">{contact.heading}</h2>
        <p class="lead mt-3">{contact.lead}</p>
        <div class="mt-6 text-sm text-bark-700/70">
          <p class="inline-flex items-center gap-2">
            <Icon name="mail" class="h-4 w-4 text-primary-700" />
            <a href="mailto:info@bnature.bz" class="text-primary-700 hover:underline">info@bnature.bz</a>
          </p>
          <p class="mt-2 inline-flex items-center gap-2">
            <Icon name="map-pin" class="h-4 w-4 text-primary-700" />
            {contact.location}
          </p>
        </div>
      </div>
      <form
        class="card space-y-4 p-6"
        id="contact-form"
        name="contact"
        method="post"
        action={`${withBase(`/${lang}`)}?contact=success#contact`}
        data-netlify="true"
        netlify-honeypot="bot-field"
        data-contact-form
      >
        <input type="hidden" name="form-name" value="contact" />
        <input type="hidden" name="bot-field" />
        <div>
          <label for="name" class="text-sm font-medium text-bark-700">Name</label>
          <input id="name" name="name" required class="mt-1 w-full rounded-xl border border-primary-200/50 bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500/30" />
        </div>
        <div>
          <label for="email" class="text-sm font-medium text-bark-700">E-Mail</label>
          <input id="email" type="email" name="email" required class="mt-1 w-full rounded-xl border border-primary-200/50 bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500/30" />
        </div>
        <div>
          <label for="message" class="text-sm font-medium text-bark-700">Nachricht</label>
          <textarea id="message" name="message" rows="4" required class="mt-1 w-full rounded-xl border border-primary-200/50 bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500/30"></textarea>
        </div>
        <p class="text-xs text-bark-700/60">Mit dem Senden stimmst du der Verarbeitung deiner Angaben zur Kontaktaufnahme zu.</p>
        <p class="hidden text-sm text-primary-700" data-contact-success role="status" aria-live="polite">{contact.successMessage}</p>
        <p class="hidden text-sm text-red-700 dark:text-red-300" data-contact-error role="alert" aria-live="assertive">{contact.errorMessage}</p>
        <div class="flex flex-wrap gap-3">
          <button type="submit" class="btn-primary">{contact.button}</button>
          <a href="mailto:info@bnature.bz" class="btn-ghost">{contact.mailLabel}</a>
        </div>
      </form>
    </div>
  </div>
</section>
