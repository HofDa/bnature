---
import type { Lang, PageContent } from '../../data/content';

interface Props {
  lang: Lang;
  otherLang: Lang;
  otherLangLabel: string;
  nav: PageContent['nav'];
  logoSrc: string;
}

const { lang, otherLang, otherLangLabel, nav, logoSrc } = Astro.props;
const withBase = (path: string) => {
  const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
  return `${base}${path.replace(/^\/+/, '')}`;
};
---
<header class="sticky top-0 z-50 border-b border-primary-200/40 bg-white ring-1 ring-sand-200 transition-transform duration-300 will-change-transform" data-smart-header>
  <div class="section-container flex items-center justify-between py-3">
    <a href={withBase(`/${lang}`)} class="inline-flex items-center gap-3 text-primary-700 hover:no-underline">
      <img src={logoSrc} alt="b*nature logo" class="navbar-logo h-8 w-auto sm:h-9" loading="eager" decoding="async" />
    </a>
    <div class="flex items-center gap-4">
      <nav class="hidden gap-6 md:flex" aria-label="Primary">
        <a href="#services" class="text-primary-800 hover:text-primary-900">{nav.services}</a>
        <a href="#about" class="text-primary-800 hover:text-primary-900">{nav.about}</a>
        <a href="#faq" class="text-primary-800 hover:text-primary-900">{nav.faq}</a>
        <a href="#contact" class="text-primary-800 hover:text-primary-900">{nav.contact}</a>
      </nav>
      <a
        href={withBase(`/${otherLang}`)}
        class="rounded-full border border-primary-200 bg-white px-3 py-1 text-xs font-semibold text-primary-800"
        aria-label={`Switch language to ${otherLangLabel}`}
      >
        {otherLangLabel}
      </a>
      <button
        type="button"
        class="inline-flex h-9 w-9 items-center justify-center rounded-md border border-primary-200 bg-white text-primary-800 md:hidden"
        aria-label="Open navigation menu"
        aria-expanded="false"
        aria-controls="mobile-nav-menu"
        data-mobile-menu-button
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" data-mobile-icon-closed><path d="M4 7h16" /><path d="M4 12h16" /><path d="M4 17h16" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" class="hidden h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" data-mobile-icon-open><path d="M6 6l12 12" /><path d="M18 6l-12 12" /></svg>
      </button>
    </div>
  </div>
  <nav
    id="mobile-nav-menu"
    class="section-container max-h-0 -translate-y-1 overflow-hidden opacity-0 transition-all duration-300 ease-out pointer-events-none md:hidden"
    data-mobile-menu
    aria-label="Mobile"
    aria-hidden="true"
    inert
  >
    <div class="space-y-2 rounded-xl border border-primary-200/50 bg-white p-3">
      <a href="#services" class="block rounded-md px-3 py-2 text-primary-800 hover:bg-primary-50 hover:no-underline">{nav.services}</a>
      <a href="#about" class="block rounded-md px-3 py-2 text-primary-800 hover:bg-primary-50 hover:no-underline">{nav.about}</a>
      <a href="#faq" class="block rounded-md px-3 py-2 text-primary-800 hover:bg-primary-50 hover:no-underline">{nav.faq}</a>
      <a href="#contact" class="block rounded-md px-3 py-2 text-primary-800 hover:bg-primary-50 hover:no-underline">{nav.contact}</a>
    </div>
  </nav>
</header>
